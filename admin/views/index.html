<!DOCTYPE html>
<html>
<head>
	<title>掌族游戏后台管理</title>
</head>
<body>
	<h1><%= title %></h1>
	<input type="text" id="news-name" name="">
	<button id="add-news" href="./admin/add">添加新文章</button>
	<h2>新闻列表</h2>
	<ul>
		<% for(var i=0; i<news_list.length; i++) {%>
		   <li><%= news_list[i].info.title %></li>
		<% } %>
	</ul>
	<script type="text/javascript">
		var add_news = document.getElementById('add-news');
		var news_name_input = document.getElementById('news-name');
		add_news.addEventListener('click', function(){
			var new_name = news_name_input.value;
			ajax('./add/' + new_name);
		});

		function ajax(url, callback){
			var ajaxRequest;  // The variable that makes Ajax possible!
				
			try{
				// Opera 8.0+, Firefox, Safari
				ajaxRequest = new XMLHttpRequest();
			} catch (e){
				// Internet Explorer Browsers
				try{
					ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
				} catch (e) {
					try{
						ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
					} catch (e){
						// Something went wrong
						alert("Your browser broke!");
						return false;
					}
				}
			}
			// Create a function that will receive data sent from the server
			ajaxRequest.onreadystatechange = function(){
				if(ajaxRequest.readyState == 4){
					// var ajaxDisplay = document.getElementById('ajaxDiv');
					// ajaxDisplay.innerHTML = ajaxRequest.responseText;
					alert(ajaxRequest.responseText);
					location.reload();
				}
			}
			// var age = document.getElementById('age').value;
			// var wpm = document.getElementById('wpm').value;
			// var sex = document.getElementById('sex').value;
			ajaxRequest.open("GET", url , true);
			ajaxRequest.send(null); 
		}
	</script>
</body>
</html>